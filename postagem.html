<!doctype html>
<html lang="pt-br">

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="/Script/function.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Abel&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/Style/postagem.css" type="text/css" />
    <title>Postagem</title>
    <script src="login.js"></script>
    <script>
        // Verifica se o usuário já esta logado e se negativo, redireciona para tela de login        
        if (!usuarioCorrente.login) {
            window.location.href = LOGIN_URL;
        }

        function exibeUsuarios() {
            
            // Popula a tabela com os registros do banco de dados
            let listaUsuarios = '';
            for (i = 0; i < db_usuarios.usuarios.length; i++) {
                let usuario = db_usuarios.usuarios[i];
                listaUsuarios += `<tr><td scope="row">${usuario.nome}</td><td>${usuario.login}</td><td>${usuario.email}</td></tr>`;
            }

            // Substitui as linhas do corpo da tabela
            document.getElementById("table-usuarios").innerHTML = listaUsuarios

        }

        function initPage() {

            // Associa a função de logout ao botão
            document.getElementById('btn_logout').addEventListener('click', logoutUser);

            // Informa o nome do usuário logado
            document.getElementById('nomeUsuario').innerHTML = usuarioCorrente.nome;

            // Lista os usuários 
            exibeUsuarios ();
        }

        // Associa ao evento de carga da página a função para verificar se o usuário está logado
        window.addEventListener('load', initPage);
    </script>
    <body>
        <nav class="navbar navbar-expand-lg navbar-dark " style="background-color: #17a2b8 ">
            <a class="navbar-brand " href="# ">

                <a href="index.html"> <img src="Img/logo1.png " alt="Logotipo "></a>


            </a>
            <button class="navbar-toggler " type="button " data-toggle="collapse " data-target="#navbarSupportedContent " aria-controls="navbarSupportedContent " aria-expanded="false " aria-label="Toggle navigation ">
      <span class="navbar-toggler-icon "></span>
    </button>

            <div class="collapse navbar-collapse " id="navbarSupportedContent ">
                <ul class="navbar-nav ml-auto mr-auto ">
                    <li class="nav-item ">
                    </li>
                    <li class="nav-item ">
                        <img src="Img/interface.png"><span id ="bv">Seja bem-vindo</span> <span id="nomeUsuario">!</span>
                        <button id="btn_logout" class="btn btn-outline-danger btn-sm">Sair</button>
                    </li>
                </ul>
                <form class="form-inline my-2 my-lg-0 ">
                    <input class="form-control mr-sm-2 " type="search " placeholder="Pesquisar " aria-label="Search ">
                    <button class="btn btn-outline-light my-2 my-sm-0 " type="submit ">Buscar</button>
                </form>
            </div>
        </nav>
        <br>
        <form id="form-cadastro">
            <div class="col-md-4 mb-3">
                <div class="form-group">
                    <label for="codigo">Código</label>
                    <input type="nome" class="form-control" id="codigo" placeholder="Digite seu nome">
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="form-group">
                    <label for="nome">Nome</label>
                    <input type="nome" class="form-control" id="nome" name="nome" placeholder="Digite seu nome">
                </div>
            </div>
            <div class="col-md-4 mb-3">
                <div class="form-group">
                    <label for="titulo">Título da publicação</label>
                    <input type="titulo" class="form-control" id="titulo" name="titulo" placeholder="Digite o título da publicação">
                </div>
            </div>
            <div class="col-md-6 mb-3">
                <div class="form-group">
                    <label for="texto">Texto</label>
                    <textarea class="form-control" name="texto" id="texto" rows="3"></textarea>
                    <small id="passwordHelpInline" class="text-muted">
                        Insira até 2000 caracteres
                    </small>

                </div>

                <button type="submit" class="btn btn-primary">Enviar publicação</button>
                <button type="reset" class="btn btn-primary">Limpar</button>
            </div>
        </form>

        <h2>POSTAGENS</h2>

        <div id="tblListar">

        </div>

    </body>

</html>